{"ast":null,"code":"import React,{useState}from\"react\";import{Form,Input,Button}from\"antd\";import axios from\"axios\";import{useNavigate,Link}from\"react-router-dom\";import\"./FormLogin.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=()=>{const[loading,setLoading]=useState(false);const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const navigate=useNavigate();const handleLogin=async()=>{setLoading(true);try{const response=await axios.post(\"http://localhost:3121/login\",{username,password});if(response.data.success){// Set items in localStorage\nlocalStorage.setItem(\"userId\",response.data.userId);localStorage.setItem(\"token\",response.data.token);localStorage.setItem(\"role\",response.data.role);// Navigate to the home page of the user's role\nnavigate(\"/\".concat(response.data.role,\"/home\"));}else{alert(\"Authentication failed: \"+response.data.message);}}catch(error){console.error(\"Error:\",error);alert(\"Login failed due to server error.\");}setLoading(false);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{name:\"login-form\",onFinish:handleLogin,style:{width:\"250px\"},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",rules:[{required:true,message:\"Please enter your username\"}],children:/*#__PURE__*/_jsx(Input,{onChange:e=>setUsername(e.target.value),placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:\"Please enter your password\"}],children:/*#__PURE__*/_jsx(Input.Password,{onChange:e=>setPassword(e.target.value),placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loading,style:{width:\"100%\"},children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"})}),/*#__PURE__*/_jsx(Form.Item,{className:\"gaust-btn\",children:/*#__PURE__*/_jsxs(Button,{className:\"gaust\",href:\"/guast\",type:\"primary\",children:[\"\\u0627\\u0644\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629 \\u0643\\u0636\\u064A\\u0641\",\" \"]})}),/*#__PURE__*/_jsx(Form.Item,{className:\"gaust-btn\",children:/*#__PURE__*/_jsx(Link,{className:\"forget\",to:\"/forgotPassword\",children:\"\\u0646\\u0633\\u064A\\u062A \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\\u061F\"})})]})});};export default LoginForm;","map":{"version":3,"names":["React","useState","Form","Input","Button","axios","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","LoginForm","loading","setLoading","username","setUsername","password","setPassword","navigate","handleLogin","response","post","data","success","localStorage","setItem","userId","token","role","concat","alert","message","error","console","children","name","onFinish","style","width","Item","rules","required","onChange","e","target","value","placeholder","Password","type","htmlType","className","href","to"],"sources":["/home/mamoon/graduation folder/graduation/src/component/LoginForm/FormLogin.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport axios from \"axios\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport \"./FormLogin.css\";\n\nconst LoginForm = () => {\n  const [loading, setLoading] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const navigate = useNavigate();\n\n  const handleLogin = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.post(\"http://localhost:3121/login\", {\n        username,\n        password,\n      });\n      if (response.data.success) {\n        // Set items in localStorage\n        localStorage.setItem(\"userId\", response.data.userId);\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"role\", response.data.role);\n\n        // Navigate to the home page of the user's role\n        navigate(`/${response.data.role}/home`);\n      } else {\n        alert(\"Authentication failed: \" + response.data.message);\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(\"Login failed due to server error.\");\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div>\n      <Form name=\"login-form\" onFinish={handleLogin} style={{ width: \"250px\" }}>\n        <Form.Item\n          name=\"username\"\n          rules={[{ required: true, message: \"Please enter your username\" }]}\n        >\n          <Input\n            onChange={(e) => setUsername(e.target.value)}\n            placeholder=\"اسم المستخدم\"\n          />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          rules={[{ required: true, message: \"Please enter your password\" }]}\n        >\n          <Input.Password\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"كلمة المرور\"\n          />\n        </Form.Item>\n        <Form.Item>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            loading={loading}\n            style={{ width: \"100%\" }}\n          >\n            تسجيل الدخول\n          </Button>\n        </Form.Item>\n        <Form.Item className=\"gaust-btn\">\n          <Button className=\"gaust\" href=\"/guast\" type=\"primary\">\n            المتابعة كضيف{\" \"}\n          </Button>\n        </Form.Item>\n        <Form.Item className=\"gaust-btn\">\n          <Link className=\"forget\" to=\"/forgotPassword\">نسيت كلمة المرور؟</Link>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}