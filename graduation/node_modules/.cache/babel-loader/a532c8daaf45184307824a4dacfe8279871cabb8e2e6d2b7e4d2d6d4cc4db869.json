{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./ChildInfo.css\";import ChildImg from\"../../assets/image/ChildDoctor.jpeg\";import{useChild}from\"../../assets/useRef/ChildContext\";// Ensure this path is correct\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ChildInfo=()=>{const[childInfo,setChildInfo]=useState([]);const[notes,setNotes]=useState([]);const[display,setDisplay]=useState(\"child\");// Using useChild hook to get the current child ID\nconst{ID}=useChild();// Fetch child information based on ID from context\nuseEffect(()=>{const fetchChildInfo=async()=>{if(ID){try{const response=await axios.get(\"http://localhost:4406/api/doctor/child/ChildInfoPage/\".concat(ID));setChildInfo(response.data);}catch(error){console.error(\"Error fetching child data:\",error);}}};const fetchNotes=async()=>{if(ID){try{const response=await axios.get(\"http://localhost:4406/api/doctor/child/notes/\".concat(ID));setNotes(response.data);}catch(error){console.error(\"Error fetching notes:\",error);}}};fetchChildInfo();fetchNotes();},[ID]);// Depend on ID from the context\nconst formatDate=dateString=>{if(!dateString){console.error(\"Invalid date string:\",dateString);return\"Invalid date\";// or you can return a default date or handle it as needed\n}const date=new Date(dateString);if(isNaN(date.getTime())){console.error(\"Cannot parse date:\",dateString);return\"Invalid date\";}return new Intl.DateTimeFormat(\"ar-US\",{year:\"numeric\",month:\"2-digit\",day:\"2-digit\"}).format(date);};return/*#__PURE__*/_jsxs(\"div\",{className:\"child-info-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDisplay(\"child\"),children:\"\\u0639\\u0631\\u0636 \\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u0637\\u0641\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDisplay(\"note\"),children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:ChildImg,alt:\"Child background\",className:\"Child-bg-img\"})}),display===\"child\"&&childInfo?/*#__PURE__*/_jsx(\"div\",{className:\"card-img-child\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0627\\u0644\\u0627\\u0633\\u0645\"}),/*#__PURE__*/_jsxs(\"td\",{children:[childInfo.first_name,\" \",childInfo.last_name]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"td\",{children:childInfo.ID})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0627\\u0644\\u062C\\u0646\\u0633\"}),/*#__PURE__*/_jsx(\"td\",{children:childInfo.gender})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0645\\u064A\\u0644\\u0627\\u062F\"}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(childInfo.DOB)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0637\\u0641\\u0644 \\u0627\\u0644\\u062A\\u0633\\u0644\\u0633\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"td\",{children:childInfo.Child_Serial_No})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0641\\u0635\\u064A\\u0644\\u0629 \\u0627\\u0644\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"td\",{children:childInfo.blood_type})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0627\\u0644\\u062D\\u0633\\u0627\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"td\",{children:childInfo.allergy||\"None\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0645\"}),/*#__PURE__*/_jsxs(\"td\",{children:[childInfo.mother_first_name,\" \",childInfo.mother_last_name]})]})]})})})}):display===\"note\"?/*#__PURE__*/_jsx(\"div\",{className:\"note-container\",children:notes.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"notes-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:notes.map(note=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(note.NoteDate)}),/*#__PURE__*/_jsx(\"td\",{children:note.Note})]},note.ID))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No notes available.\"})}):null]});};export default ChildInfo;","map":{"version":3,"names":["React","useState","useEffect","axios","ChildImg","useChild","jsx","_jsx","jsxs","_jsxs","ChildInfo","childInfo","setChildInfo","notes","setNotes","display","setDisplay","ID","fetchChildInfo","response","get","concat","data","error","console","fetchNotes","formatDate","dateString","date","Date","isNaN","getTime","Intl","DateTimeFormat","year","month","day","format","className","children","onClick","src","alt","first_name","last_name","gender","DOB","Child_Serial_No","blood_type","allergy","mother_first_name","mother_last_name","length","map","note","NoteDate","Note"],"sources":["/home/mamoon/graduation folder/graduation/src/component/ChildInfo/ChildInfo.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./ChildInfo.css\";\nimport ChildImg from \"../../assets/image/ChildDoctor.jpeg\";\nimport { useChild } from \"../../assets/useRef/ChildContext\"; // Ensure this path is correct\n\nconst ChildInfo = () => {\n  const [childInfo, setChildInfo] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [display, setDisplay] = useState(\"child\");\n\n  // Using useChild hook to get the current child ID\n  const { ID } = useChild();\n\n  // Fetch child information based on ID from context\n  useEffect(() => {\n    const fetchChildInfo = async () => {\n      if (ID) {\n        try {\n          const response = await axios.get(\n            `http://localhost:4406/api/doctor/child/ChildInfoPage/${ID}`\n          );\n          setChildInfo(response.data);\n        } catch (error) {\n          console.error(\"Error fetching child data:\", error);\n        }\n      }\n    };\n\n    const fetchNotes = async () => {\n      if (ID) {\n        try {\n          const response = await axios.get(\n            `http://localhost:4406/api/doctor/child/notes/${ID}`\n          );\n          setNotes(response.data);\n        } catch (error) {\n          console.error(\"Error fetching notes:\", error);\n        }\n      }\n    };\n\n    fetchChildInfo();\n    fetchNotes();\n  }, [ID]); // Depend on ID from the context\n\n  const formatDate = (dateString) => {\n    if (!dateString) {\n      console.error(\"Invalid date string:\", dateString);\n      return \"Invalid date\"; // or you can return a default date or handle it as needed\n    }\n\n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) {\n      console.error(\"Cannot parse date:\", dateString);\n      return \"Invalid date\";\n    }\n\n    return new Intl.DateTimeFormat(\"ar-US\", {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n    }).format(date);\n  };\n\n  return (\n    <div className=\"child-info-container\">\n      <div className=\"buttons-container\">\n        <button onClick={() => setDisplay(\"child\")}>عرض معلومات الطفل</button>\n        <button onClick={() => setDisplay(\"note\")}>عرض الملاحظات</button>\n      </div>\n\n      <div>\n        <img src={ChildImg} alt=\"Child background\" className=\"Child-bg-img\" />\n      </div>\n      {display === \"child\" && childInfo ? (\n        <div className=\"card-img-child\">\n          <div className=\"table-container\">\n            <table>\n              <tbody>\n                <tr>\n                  <td>الاسم</td>\n                  <td>\n                    {childInfo.first_name} {childInfo.last_name}\n                  </td>\n                </tr>\n                <tr>\n                  <td>رقم الهوية</td>\n                  <td>{childInfo.ID}</td>\n                </tr>\n                <tr>\n                  <td>الجنس</td>\n                  <td>{childInfo.gender}</td>\n                </tr>\n                <tr>\n                  <td>تاريخ الميلاد</td>\n                  <td>{formatDate(childInfo.DOB)}</td>\n                </tr>\n                <tr>\n                  <td>رقم الطفل التسلسلي</td>\n                  <td>{childInfo.Child_Serial_No}</td>\n                </tr>\n                <tr>\n                  <td>فصيلة الدم</td>\n                  <td>{childInfo.blood_type}</td>\n                </tr>\n                <tr>\n                  <td>الحساسية</td>\n                  <td>{childInfo.allergy || \"None\"}</td>\n                </tr>\n                <tr>\n                  <td>اسم الأم</td>\n                  <td>\n                    {childInfo.mother_first_name} {childInfo.mother_last_name}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      ) : display === \"note\" ? (\n        <div className=\"note-container\">\n          {notes.length > 0 ? (\n            <table className=\"notes-table\">\n              <thead>\n                <tr>\n                  <th>التاريخ</th>\n                  <th>الملاحظة</th>\n                </tr>\n              </thead>\n              <tbody>\n                {notes.map((note) => (\n                  <tr key={note.ID}>\n                    <td>{formatDate(note.NoteDate)}</td>\n                    <td>{note.Note}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          ) : (\n            <p>No notes available.</p>\n          )}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default ChildInfo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}