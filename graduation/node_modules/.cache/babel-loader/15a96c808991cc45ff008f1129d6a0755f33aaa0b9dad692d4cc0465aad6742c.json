{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{Calendar,TimePicker,Button,message}from\"antd\";import moment from\"moment\";import\"./BookAppointment.css\";// Ensure you import the CSS to style Ant components\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BookAppointment=()=>{const[selectedDate,setSelectedDate]=useState(null);const[selectedTime,setSelectedTime]=useState(null);const disabledDate=current=>{// Can not select Fridays and days before today\nreturn current.day()===5||current<moment().startOf(\"day\");};const disabledHours=()=>{// Disable hours outside of 8 AM to 2 PM\nlet hours=[];for(let i=0;i<24;i++){if(i<8||i>=14){hours.push(i);}}return hours;};const onPanelChange=value=>{console.log(value.format(\"YYYY-MM-DD\"));setSelectedDate(value);};const onTimeChange=time=>{console.log(time?time.format(\"HH:mm:ss\"):\"No time selected\");setSelectedTime(time);};const handleBookingSubmit=async()=>{if(!selectedDate||!selectedTime){message.error(\"Please select both a date and a time.\");return;}const formattedDate=selectedDate.format(\"YYYY-MM-DD\");const formattedTime=selectedTime.format(\"HH:mm:ss\");const Mother_ID=localStorage.getItem(\"userId\");console.log(\"Preparing to submit booking with the following data:\",{date:formattedDate,time:formattedTime,Mother_ID:Mother_ID});if(!Mother_ID){message.error(\"No mother ID found. Please log in.\");return;}try{const response=await axios.post(\"http://localhost:5007/mother/Appointment\",{date:formattedDate,time:formattedTime,Mother_ID:Mother_ID// Ensure this matches exactly with the backend expected field\n});message.success(\"Booking submitted successfully\");console.log(\"Booking submitted:\",response.data);}catch(error){message.error(\"Failed to book appointment: \"+(error.response?error.response.data:\"Network error\"));console.error(\"Error submitting booking:\",error.response);}};return/*#__PURE__*/_jsxs(\"div\",{style:{width:300,margin:\"auto\",marginTop:80,padding:20,border:\"1px solid #ccc\",borderRadius:\"8px\",backgroundColor:\"#f9f9f9\",boxShadow:\"0 2px 4px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(Calendar,{fullscreen:false,onPanelChange:onPanelChange,disabledDate:disabledDate}),/*#__PURE__*/_jsx(TimePicker,{format:\"HH:mm\",use12Hours:true,minuteStep:30,placeholder:\"Select Time\",onChange:onTimeChange,disabledHours:disabledHours,style:{margin:\"10px 0\"}}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleBookingSubmit,style:{marginTop:10},children:\"Submit\"})]});};export default BookAppointment;","map":{"version":3,"names":["React","useState","axios","Calendar","TimePicker","Button","message","moment","jsx","_jsx","jsxs","_jsxs","BookAppointment","selectedDate","setSelectedDate","selectedTime","setSelectedTime","disabledDate","current","day","startOf","disabledHours","hours","i","push","onPanelChange","value","console","log","format","onTimeChange","time","handleBookingSubmit","error","formattedDate","formattedTime","Mother_ID","localStorage","getItem","date","response","post","success","data","style","width","margin","marginTop","padding","border","borderRadius","backgroundColor","boxShadow","children","fullscreen","use12Hours","minuteStep","placeholder","onChange","type","onClick"],"sources":["/home/mamoon/graduation folder/graduation/src/component/BookAppointment/BookAppointment.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Calendar, TimePicker, Button, message } from \"antd\";\nimport moment from \"moment\";\nimport \"./BookAppointment.css\"; // Ensure you import the CSS to style Ant components\n\nconst BookAppointment = () => {\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [selectedTime, setSelectedTime] = useState(null);\n\n  const disabledDate = (current) => {\n    // Can not select Fridays and days before today\n    return current.day() === 5 || current < moment().startOf(\"day\");\n  };\n\n  const disabledHours = () => {\n    // Disable hours outside of 8 AM to 2 PM\n    let hours = [];\n    for (let i = 0; i < 24; i++) {\n      if (i < 8 || i >= 14) {\n        hours.push(i);\n      }\n    }\n    return hours;\n  };\n\n  const onPanelChange = (value) => {\n    console.log(value.format(\"YYYY-MM-DD\"));\n    setSelectedDate(value);\n  };\n\n  const onTimeChange = (time) => {\n    console.log(time ? time.format(\"HH:mm:ss\") : \"No time selected\");\n    setSelectedTime(time);\n  };\n\n  const handleBookingSubmit = async () => {\n    if (!selectedDate || !selectedTime) {\n      message.error(\"Please select both a date and a time.\");\n      return;\n    }\n\n    const formattedDate = selectedDate.format(\"YYYY-MM-DD\");\n    const formattedTime = selectedTime.format(\"HH:mm:ss\");\n    const Mother_ID = localStorage.getItem(\"userId\");\n\n    console.log(\"Preparing to submit booking with the following data:\", {\n      date: formattedDate,\n      time: formattedTime,\n      Mother_ID: Mother_ID,\n    });\n\n    if (!Mother_ID) {\n      message.error(\"No mother ID found. Please log in.\");\n      return;\n    }\n\n    try {\n      const response = await axios.post(\n        \"http://localhost:5007/mother/Appointment\",\n        {\n          date: formattedDate,\n          time: formattedTime,\n          Mother_ID: Mother_ID, // Ensure this matches exactly with the backend expected field\n        }\n      );\n\n      message.success(\"Booking submitted successfully\");\n      console.log(\"Booking submitted:\", response.data);\n    } catch (error) {\n      message.error(\n        \"Failed to book appointment: \" +\n          (error.response ? error.response.data : \"Network error\")\n      );\n      console.error(\"Error submitting booking:\", error.response);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        width: 300,\n        margin: \"auto\",\n        marginTop: 80,\n        padding: 20,\n        border: \"1px solid #ccc\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#f9f9f9\",\n        boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\n      }}\n    >\n      <Calendar\n        fullscreen={false}\n        onPanelChange={onPanelChange}\n        disabledDate={disabledDate}\n      />\n      <TimePicker\n        format=\"HH:mm\"\n        use12Hours\n        minuteStep={30}\n        placeholder=\"Select Time\"\n        onChange={onTimeChange}\n        disabledHours={disabledHours}\n        style={{ margin: \"10px 0\" }}\n      />\n      <Button\n        type=\"primary\"\n        onClick={handleBookingSubmit}\n        style={{ marginTop: 10 }}\n      >\n        Submit\n      </Button>\n    </div>\n  );\n};\n\nexport default BookAppointment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}